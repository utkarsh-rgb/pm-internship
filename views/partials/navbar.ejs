<!-- Top Government Header -->
<div class="fixed-top ">
  <div
    class="d-flex align-items-center justify-content-between px-2 px-md-3 py-1 py-md-2 border-bottom bg-dark text-white"
  >
    <div class="d-flex align-items-center">
     <img
  src="/images/india.svg"
  alt="India Logo"
  class="me-1 me-md-2 img-fluid"
  style="width: 30px; height: 20px;"
/>
      <h2 class="small mb-0 text-white d-none d-md-block">
        भारत सरकार / Government Of India
      </h2>
      <h2 class="small mb-0 text-white d-md-none" style="font-size: 0.7rem">
      भारत सरकार / Government Of India
      </h2>
    </div>
    <div class="d-flex align-items-center gap-1 gap-md-3">
      <span class="d-none d-lg-inline" style="font-size: 0.75rem"
        >Do's & Don'ts</span
      >
      <span style="font-size: 0.75rem">English</span>
      <span class="d-none d-md-inline" style="font-size: 0.75rem"
        >Screen Reader</span
      >
      <span style="font-size: 0.7rem">A-</span>
      <span style="font-size: 0.7rem">A</span>
      <span style="font-size: 0.7rem">A+</span>
    </div>
  </div>

  <!-- Main Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm py-2">
    <div class="container-fluid px-2 px-md-3">
      <!-- Brand -->
      <div class="d-flex align-items-center">
        <img
          src="/images/mca.svg"
          alt="MCA Logo"
          width="80"
          height="35"
          class="me-1 me-md-2 d-none d-sm-block"
        />
        <img
          src="/images/mca.svg"
          alt="MCA Logo"
          width="60"
          height="25"
          class="me-1 d-sm-none"
        />
        <a class="navbar-brand fw-bold d-flex align-items-center p-0" href="/">
          <img
            src="/images/pmi.png"
            alt="PMI Logo"
            width="80"
            height="35"
            class="d-none d-sm-block"
          />
          <img
            src="/images/pmi.png"
            alt="PMI Logo"
            width="60"
            height="25"
            class="d-sm-none"
          />
        </a>
      </div>

      <!-- Mobile Toggle Button -->
      <button
        class="navbar-toggler border-0 p-1"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navigation Links -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto mt-2 mt-lg-0" id="nav-links">
          <li class="nav-item">
            <a class="nav-link fw-semibold px-2 small" href="/">
              <i class="bi bi-house-fill me-1"></i> Home
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-semibold px-2 small" href="/about">
              <i class="bi bi-info-circle-fill me-1"></i> About
            </a>
          </li>
          <li class="nav-item">
            <a
              id="recommendLink"
              class="nav-link fw-semibold px-2 small"
              href="#"
            >
              <i class="bi bi-star-fill me-1"></i> Recommendations
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-semibold px-2 small" href="/contact">
              <i class="bi bi-envelope-fill me-1"></i> Contact
            </a>
          </li>
          <!-- Dynamic Auth Buttons -->
          <li class="nav-item ms-0 ms-lg-2 mt-2 mt-lg-0" id="auth-buttons"></li>
        </ul>
      </div>
    </div>
  </nav>
</div>



<style>

  /* Mobile specific adjustments */
  @media (max-width: 576px) {
    .ticker-content {
      font-size: 0.7rem;
      animation-duration: 35s;
    }

    .navbar-brand {
      margin-right: 0;
    }

    .navbar-nav .nav-link {
      padding: 0.25rem 0.5rem;
    }
  }

  @media (max-width: 768px) {
    .navbar-collapse {
      background-color: #f8f9fa;
      margin-top: 0.5rem;
      border-radius: 0.375rem;
      padding: 0.5rem;
    }
  }

  /* Button responsive sizing */
  .btn-sm {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
  }

  @media (max-width: 576px) {
    .btn-sm {
      font-size: 0.7rem;
      padding: 0.2rem 0.4rem;
    }
  }
</style>

<script>
  async function renderNavbar() {
    const authButtons = document.getElementById("auth-buttons");
    const recommendLink = document.getElementById("recommendLink");

    const studentId = localStorage.getItem("studentId");
    const studentName = localStorage.getItem("studentName");

    if (!studentId || !studentName) {
      // Not logged in
      authButtons.innerHTML = `
      <div class="d-flex flex-column flex-lg-row gap-1">
        <a class="btn btn-outline-primary btn-sm" href="/signup">
          <i class="bi bi-person-plus-fill me-1"></i> Sign Up
        </a>
        <a class="btn btn-success btn-sm" href="/login">
          <i class="bi bi-box-arrow-in-right me-1"></i> Login
        </a>
      </div>
    `;
      recommendLink.href = "/recommend";
      return;
    }

    // Set Recommendations link
    recommendLink.href = `/recommend/${studentId}`;

    try {
      const res = await fetch(`/api/check-application/${studentId}`);
      const data = await res.json();

      const applied = data.applied; // backend should return "yes" or "no"

      if (applied === "yes") {
        authButtons.innerHTML = `
        <div class="d-flex flex-column flex-lg-row gap-1">
          <a class="btn btn-outline-success btn-sm" href="/application/${studentId}">Applied</a>
          <button class="btn btn-danger btn-sm" onclick="logout()">
            <i class="bi bi-box-arrow-right me-1"></i> Logout
          </button>
        </div>
      `;
      } else {
        authButtons.innerHTML = `
        <div class="d-flex flex-column flex-lg-row gap-1">
          <a class="btn btn-outline-primary btn-sm" href="/form">
            <i class="bi bi-person-plus-fill me-1"></i> Apply Now
          </a>
          <button class="btn btn-danger btn-sm" onclick="logout()">
            <i class="bi bi-box-arrow-right me-1"></i> Logout
          </button>
        </div>
      `;
      }
    } catch (err) {
      console.error("Navbar fetch error:", err);
      authButtons.innerHTML = `
      <div class="d-flex flex-column flex-lg-row gap-1">
        <a class="btn btn-outline-primary btn-sm" href="/form">Apply Now</a>
        <button class="btn btn-danger btn-sm" onclick="logout()">
          <i class="bi bi-box-arrow-right me-1"></i> Logout
        </button>
      </div>
    `;
    }
  }

  function logout() {
    localStorage.removeItem("studentId");
    localStorage.removeItem("studentName");
    window.location.href = "/";
  }

  // Initialize navbar on page load
  document.addEventListener("DOMContentLoaded", renderNavbar);
</script>
